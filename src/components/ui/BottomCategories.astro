---
/**
 * Clean Categories Section - No Hardcoded Colors
 */

import { getCollection } from 'astro:content';
import CategoryCircle from './CategoryCircle.astro';

// Get categories for the circles (excluding uncategorized)
const allCategories = await getCollection('categories');
const topCategories = allCategories.filter(category => category.id !== 'uncategorized').slice(0, 5);
---

{topCategories.length > 0 && (
  <section class="relative overflow-hidden py-12 lg:py-16" 
           style="background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);">
    
    <!-- Unified Background Pattern -->
    <div class="absolute inset-0" 
         style="opacity: 0.08; 
                background-image: 
                  radial-gradient(circle at 20% 30%, var(--color-primary) 0%, transparent 35%), 
                  radial-gradient(circle at 80% 70%, var(--color-accent) 0%, transparent 35%),
                  radial-gradient(circle at 60% 20%, rgba(139, 92, 246, 0.3) 0%, transparent 25%);"></div>
    
    <!-- Premium Floating Elements -->
    <div class="absolute inset-0 pointer-events-none">
      <div class="absolute top-16 right-12 w-24 h-24 rounded-full bg-gradient-to-br from-emerald-400/8 to-teal-400/8 blur-xl animate-pulse" style="animation-delay: 1s;"></div>
      <div class="absolute bottom-20 left-16 w-32 h-32 rounded-full bg-gradient-to-br from-violet-400/6 to-purple-400/6 blur-xl animate-pulse" style="animation-delay: 3s;"></div>
    </div>
    
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
      <!-- Optimized Section Header -->
      <div class="text-center mb-8 lg:mb-12 stagger-children">
        
        <!-- Premium Glassmorphism Eyebrow -->
        <div class="inline-flex items-center gap-3 rounded-full mb-6 transition-all duration-500 hover:scale-105 interactive-lift"
             style="padding: var(--space-sm) var(--space-lg);
                    background: rgba(255, 255, 255, 0.08);
                    border: 1px solid rgba(255, 255, 255, 0.15);
                    backdrop-filter: blur(20px);
                    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.2);">
          <div class="w-3 h-3 rounded-full animate-pulse bg-gradient-to-r from-cyan-400 to-blue-500"></div>
          <span class="font-bold text-gradient uppercase tracking-wider text-sm"
                style="background: linear-gradient(135deg, var(--color-info) 0%, var(--color-primary) 100%);
                       -webkit-background-clip: text;
                       -webkit-text-fill-color: transparent;
                       background-clip: text;">
            Explore Categories
          </span>
          <div class="w-3 h-3 rounded-full animate-pulse bg-gradient-to-r from-indigo-400 to-purple-500" style="animation-delay: 1.5s;"></div>
        </div>
        
        <!-- Optimized Section Headline -->
        <h2 class="text-3xl lg:text-4xl font-black leading-tight mb-4 scale-in"
            style="font-family: var(--font-heading);
                   background: linear-gradient(135deg, var(--text-primary) 0%, var(--color-primary) 50%, var(--color-accent) 100%);
                   -webkit-background-clip: text;
                   -webkit-text-fill-color: transparent;
                   background-clip: text;
                   text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                   letter-spacing: -0.015em;
                   text-wrap: balance;">
          Browse Categories
        </h2>
        
        <!-- Premium Description -->
        <p class="max-w-2xl mx-auto text-body leading-relaxed fade-in" 
           style="color: var(--text-secondary);
                  font-family: var(--font-body);
                  text-wrap: balance;
                  opacity: 0.9;">
          Discover specialized tools and software solutions tailored to your business needs
        </p>
      </div>

      <!-- Premium Glassmorphism Category Grid -->
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 lg:gap-8 stagger-children">
        {topCategories.map((category) => (
          <a href={`/categories/${category.data.slug}`} class="group block">
            <div class="theme-card-glass interactive-lift text-center p-6 lg:p-8 group-hover:scale-105 transition-all duration-500 h-full flex flex-col items-center justify-center min-h-[140px] lg:min-h-[160px]"
                 style="background: rgba(255, 255, 255, 0.08);
                        backdrop-filter: blur(20px);
                        border: 1px solid rgba(255, 255, 255, 0.15);
                        border-radius: var(--radius-xl);
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.2);">
              <!-- Premium Glassmorphism Category Icon -->
              <div class="w-16 h-16 lg:w-20 lg:h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center group-hover:scale-110 transition-all duration-500"
                   style="background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
                          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15), 0 4px 16px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.2);">
                <svg class="w-8 h-8 lg:w-10 lg:h-10 text-white group-hover:rotate-12 transition-transform duration-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14-4H3m16 8H7m12 4H9"></path>
                </svg>
              </div>
              
              <!-- Premium Category Name -->
              <h3 class="text-sm lg:text-base font-bold group-hover:text-gradient transition-all duration-300 text-center line-clamp-2 leading-tight mb-2"
                  style="color: var(--text-primary); 
                         font-family: var(--font-heading);
                         text-wrap: balance;">
                {category.data.name}
              </h3>
              
              <!-- Premium Hover Arrow with Gradient -->
              <div class="opacity-0 group-hover:opacity-100 transition-all duration-500 group-hover:translate-y-1">
                <svg class="w-5 h-5 group-hover:translate-x-2 group-hover:scale-110 transition-all duration-500" 
                     fill="none" stroke="currentColor" viewBox="0 0 24 24"
                     style="color: var(--color-primary);">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                </svg>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>
)}